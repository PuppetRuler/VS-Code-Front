{"ast":null,"code":"import pubsub from 'pubsub-js';\nimport MyHeader from './components/MyHeader';\nimport MyList from './components/MyList';\nimport MyFooter from './components/MyFooter';\nexport default {\n  name: 'App',\n  components: {\n    MyHeader,\n    MyList,\n    MyFooter\n  },\n  data() {\n    return {\n      //由于todos是MyHeader组件和MyFooter组件都在使用，所以放在App中（状态提升）\n      todos: JSON.parse(localStorage.getItem('todos')) || []\n    };\n  },\n  methods: {\n    //添加一个todo\n    addTodo(x) {\n      this.todos.unshift(x);\n    },\n    //勾选or取消勾选\n    checkTodo(id) {\n      this.todos.forEach(todo => {\n        if (todo.id === id) todo.done = !todo.done;\n      });\n    },\n    //删除一个todo\n    deleteTodo(_, id) {\n      //_表示参数有，但不用\n      this.todos = this.todos.filter(todo => todo.id !== id);\n    },\n    //全选or全不选\n    checkAllTodo(done) {\n      this.todos.forEach(todo => {\n        todo.done = done;\n      });\n    },\n    //清除所有todo\n    clearAllTodo() {\n      if (confirm('确定删除已完成内容')) {\n        this.todos = this.todos.filter(todo => {\n          return !todo.done;\n        });\n      }\n    }\n  },\n  watch: {\n    todos: {\n      deep: true,\n      handler(value) {\n        localStorage.setItem('todos', JSON.stringify(value));\n      }\n    }\n  },\n  mounted() {\n    this.$bus.$on('checkTodo', this.checkTodo);\n    this.pubId = pubsub.subscribe('deleteTodo', this.deleteTodo);\n  },\n  beforeDestroy() {\n    this.$bus.$off('checkTodo');\n    pubsub.unsubscribe('pubId');\n  }\n};","map":{"version":3,"names":["pubsub","MyHeader","MyList","MyFooter","name","components","data","todos","JSON","parse","localStorage","getItem","methods","addTodo","x","unshift","checkTodo","id","forEach","todo","done","deleteTodo","_","filter","checkAllTodo","clearAllTodo","confirm","watch","deep","handler","value","setItem","stringify","mounted","$bus","$on","pubId","subscribe","beforeDestroy","$off","unsubscribe"],"sources":["src/App.vue"],"sourcesContent":["<template>\r\n    <div id=\"root\">\r\n        <div class=\"todo-container\">\r\n            <div class=\"todo-wrap\">\r\n                <MyHeader @addTodo=\"addTodo\"></MyHeader>\r\n                <MyList :todos=\"todos\"></MyList>\r\n                <MyFooter :todos=\"todos\" \r\n                @checkAllTodo=\"checkAllTodo\" \r\n                @clearAllTodo=\"clearAllTodo\"></MyFooter>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import pubsub from 'pubsub-js';\r\n    import MyHeader from './components/MyHeader';\r\n    import MyList from './components/MyList';\r\n    import MyFooter from './components/MyFooter';\r\n\r\n    export default {\r\n        name: 'App',\r\n        components: { MyHeader, MyList, MyFooter },\r\n        data() {\r\n            return {\r\n                //由于todos是MyHeader组件和MyFooter组件都在使用，所以放在App中（状态提升）\r\n                todos: JSON.parse(localStorage.getItem('todos')) || []\r\n            };\r\n        },\r\n        methods: {\r\n            //添加一个todo\r\n            addTodo(x) {\r\n                this.todos.unshift(x);\r\n            },\r\n            //勾选or取消勾选\r\n            checkTodo(id) {\r\n                this.todos.forEach((todo) => {\r\n                    if (todo.id === id) todo.done = !todo.done;\r\n                });\r\n            },\r\n            //删除一个todo\r\n            deleteTodo(_,id) {  //_表示参数有，但不用\r\n                this.todos = this.todos.filter(todo => todo.id !== id);\r\n            },\r\n            //全选or全不选\r\n            checkAllTodo(done) {\r\n                this.todos.forEach((todo) => {\r\n                    todo.done = done;\r\n                });\r\n            },\r\n            //清除所有todo\r\n            clearAllTodo() {\r\n                if (confirm('确定删除已完成内容')) {\r\n                    this.todos = this.todos.filter((todo) => {\r\n                        return !todo.done;\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        watch: {\r\n            todos:{\r\n                deep:true,\r\n                handler(value){\r\n                    localStorage.setItem('todos', JSON.stringify(value));\r\n                }\r\n            }\r\n        },\r\n        mounted(){\r\n            this.$bus.$on('checkTodo',this.checkTodo)\r\n            this.pubId = pubsub.subscribe('deleteTodo',this.deleteTodo)\r\n        },\r\n        beforeDestroy(){\r\n            this.$bus.$off('checkTodo')\r\n            pubsub.unsubscribe('pubId')\r\n        }\r\n    };\r\n</script>\r\n\r\n<style>\r\n    /*base*/\r\n    body {\r\n        background: #fff;\r\n    }\r\n\r\n    .btn {\r\n        display: inline-block;\r\n        padding: 4px 12px;\r\n        margin-bottom: 0;\r\n        font-size: 14px;\r\n        line-height: 20px;\r\n        text-align: center;\r\n        vertical-align: middle;\r\n        cursor: pointer;\r\n        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);\r\n        border-radius: 4px;\r\n    }\r\n\r\n    .btn-edit {\r\n        color: #fff;\r\n        background-color: skyblue;\r\n        border: 1px solid #bd362f;\r\n    }\r\n\r\n    .btn-danger {\r\n        color: #fff;\r\n        background-color: #da4f49;\r\n        border: 1px solid #bd362f;\r\n    }\r\n\r\n    .btn-edit:hover {\r\n        color: #fff;\r\n        background-color: blue;\r\n    }\r\n\r\n    .btn-danger:hover {\r\n        color: #fff;\r\n        background-color: #bd362f;\r\n    }\r\n\r\n    .btn:focus {\r\n        outline: none;\r\n    }\r\n\r\n    .todo-container {\r\n        width: 600px;\r\n        margin: 0 auto;\r\n    }\r\n    .todo-container .todo-wrap {\r\n        padding: 10px;\r\n        border: 1px solid #ddd;\r\n        border-radius: 5px;\r\n    }\r\n</style>"],"mappings":"AAeA,OAAAA,MAAA;AACA,OAAAC,QAAA;AACA,OAAAC,MAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAJ,QAAA;IAAAC,MAAA;IAAAC;EAAA;EACAG,KAAA;IACA;MACA;MACAC,KAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA;EACA;EACAC,OAAA;IACA;IACAC,QAAAC,CAAA;MACA,KAAAP,KAAA,CAAAQ,OAAA,CAAAD,CAAA;IACA;IACA;IACAE,UAAAC,EAAA;MACA,KAAAV,KAAA,CAAAW,OAAA,CAAAC,IAAA;QACA,IAAAA,IAAA,CAAAF,EAAA,KAAAA,EAAA,EAAAE,IAAA,CAAAC,IAAA,IAAAD,IAAA,CAAAC,IAAA;MACA;IACA;IACA;IACAC,WAAAC,CAAA,EAAAL,EAAA;MAAA;MACA,KAAAV,KAAA,QAAAA,KAAA,CAAAgB,MAAA,CAAAJ,IAAA,IAAAA,IAAA,CAAAF,EAAA,KAAAA,EAAA;IACA;IACA;IACAO,aAAAJ,IAAA;MACA,KAAAb,KAAA,CAAAW,OAAA,CAAAC,IAAA;QACAA,IAAA,CAAAC,IAAA,GAAAA,IAAA;MACA;IACA;IACA;IACAK,aAAA;MACA,IAAAC,OAAA;QACA,KAAAnB,KAAA,QAAAA,KAAA,CAAAgB,MAAA,CAAAJ,IAAA;UACA,QAAAA,IAAA,CAAAC,IAAA;QACA;MACA;IACA;EACA;EACAO,KAAA;IACApB,KAAA;MACAqB,IAAA;MACAC,QAAAC,KAAA;QACApB,YAAA,CAAAqB,OAAA,UAAAvB,IAAA,CAAAwB,SAAA,CAAAF,KAAA;MACA;IACA;EACA;EACAG,QAAA;IACA,KAAAC,IAAA,CAAAC,GAAA,mBAAAnB,SAAA;IACA,KAAAoB,KAAA,GAAApC,MAAA,CAAAqC,SAAA,oBAAAhB,UAAA;EACA;EACAiB,cAAA;IACA,KAAAJ,IAAA,CAAAK,IAAA;IACAvC,MAAA,CAAAwC,WAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}